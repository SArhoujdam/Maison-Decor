{% extends 'base.html' %}

{% block content %}
    <h1>Produits les plus vendus</h1>

    <p>Voici les produits qui ont été les plus vendus dans votre boutique :</p>

    <table>
        <thead>
            <tr>
                <th>Nom du produit</th>
                <th>Quantité vendue</th>
                <th>Prix</th>
                <th>Image</th>
            </tr>
        </thead>
        <tbody>
            {% for produit in produits_vendus %}
                <tr>
                    <td>{{ produit.nom }}</td>
                    <td>{{ produit.total_vendu }}</td>
                    <td>{{ produit.prix }} DH</td>
                    <td>
                        {% if produit.photo %}
                            <img src="{{ produit.photo.url }}" alt="{{ produit.nom }}" style="max-width: 100px; height: auto;">
                        {% else %}
                            <span>Pas d'image</span>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const backgroundColor = localStorage.getItem('backgroundColor') || '#ffffff';
        const textColor = localStorage.getItem('textColor') || '#000000';
        const fontFamily = localStorage.getItem('fontFamily') || 'sans-serif';
        const navbarBgColor = localStorage.getItem('navbarBgColor') || '#ffffff';
        const navbarLinkColor = localStorage.getItem('navbarLinkColor') || '#000000';

        // Appliquer les styles sur le body
        document.body.style.backgroundColor = backgroundColor;
        document.body.style.color = textColor;
        document.body.style.fontFamily = fontFamily;

        // Appliquer les styles sur le navbar
        const navbar = document.querySelector('header, nav, #header');
        const navLinks = document.querySelectorAll('nav a');

        if (navbar) {
            navbar.style.backgroundColor = navbarBgColor;
        }

        navLinks.forEach(link => {
            link.style.color = navbarLinkColor;
        });
    });
</script>

{% endblock %}
